$(function(){
  if($('.button-like')[0]){
    if($('.button-like')[0].id!="0"){
      $('.btn-create').hide();
      $('.btn-delete').show();
    } else {
      $('.btn-create').show();
      $('.btn-delete').hide();
  }
  create_like = function(){
    var post_id = $('#comment_post_review_id').val();
    if($('#user_profile')[0]){
      $.ajax({
        method: 'POST',
        url: '/post_reviews/'+ post_id + '/likes',
        type: 'JSON',
        data: {"likes": {"post_review_id": post_id}}
      }).success(function(data){
        if (data.status == "success") {
          $('.button-like').append(data.content);
          $('.btn-create').remove();
        } else {
          alert("<%= I18n.t("flash.create_like_failed") %>");
        }
      }).error(function(){
        alert("<%= I18n.t("flash.create_like_failed") %>");
      });
    } else {
      $("#Login_Modal").modal();
    }
  };
}});
